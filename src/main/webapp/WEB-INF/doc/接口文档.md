### 对接文档

- 项目地址---    ==http:www.onepi.top:8080/blog


#### 获取用户信息 (get)

- 获取用户信息
```
<项目地址>/blog/myhomepage
```

- 请求参数
```
{
    id   //字符串（用户id）
}
```

- 返回参数  
```
id
username
password
age
phone
eamil
realname(真名)
signature(个性签名)
faceImg（头像路径）
address
visible(是否可见，1为可见，0为不可见)
fans
newFans
idols
notReadComment 未读评论
permission{
    permissionType （1为普通用户， 0为管理员）
    pushStatus  （1为没被禁止推送，0为禁止）
    loginStatus （1为没被禁止登陆，0为禁止）
    pushTime   （禁止期限时间）
    loginTime
}

albumList {
    albumName （像册名）
    coverHash （封面照片地址）
    commentList (相册评论){
        fromUserId（来自评论者id）
        fromBlogId（来自的博客）
    }
}
```

#### 新建相册 （POST）
```aidl
<项目地址>/blog/newAlbum
```
- 请求参数
```aidl
  {
        userId (用户id)
        albumName （相册名）
  }
```
- 返回参数
```aidl
成功
{
    "result": "success",
    "message": null
}
失败
{
    "result": "error",
    "message": "你已存在同名标签的照片库"
}
```


#### 修改个人信息 （POST）
```$xslt
<项目地址>/blog/updateUserInfo
```

- 请求参数
```
{
    id   //字符串（用户id） //(必需)
    username //(非必需)
    phone //(非必需)
    address //(非必需)
    age //(非必需)
    email //(非必需)
    signature //(非必需)
    visible //(必需)
}
```

- 返回参数
```
调用成功
{
  result ： "success"
}

调用失败
{
  reslt : **Error
  //除用户名外其它error都为格式问题
}
```


#### 查看他人资料 （GET）
```
<项目地址>/blog/otherHomepage
```

- 请求参数
```
{
    id   //你所要浏览的用户的id
}
```

- 返回参数
```
    成功
    {
        result:"success", //可见 
        message:
        id    //用户id
        phone
        email
        realname
        signature //个性签名
        faceImg //头像
        address //地址
        fans 
        idols
    }
        失败
    {
        result:"fail",  //不可见
        message: null
    }
```

#### 上传图片到相册 （POST） (图片有大小限制10M)
```
<项目地址>/blog/uploadPhotos
```
- 请求参数
```
{
    userId(用户id)
    id （相册id）（若无则选择默认相册）
    file （图片）
}
```
- 返回参数
```
    成功
    {
        result:"success",
        message:"xxxx.xxx"//图片名     图片访问路径：<项目地址>+"/img/{message}"
    }
        失败
    {
        result:"error",
        message:"不支持此文件类型")
    }
```

#### 选择显示相册/类别的照片 (GET)
```aidl
<项目地址>/blog/photoSign
```
- 请求参数
```aidl
   albumId: 相册id
```

- 返回参数
```aidl
{
    "result": "success",
    "message": [
        {
            "id": 
            "albumId": 
            "photoHash": 
            "pushTime": 
        }
        {
          ...
          ...
          ...
        }
}
```


#### 删除照片 （GET）
```$xslt
<项目地址>/blog/deletePhoto
```
- 请求参数
```$xslt
    photoId (图片id)
```
- 返回参数
```$xslt
    成功
    {
        result:"success",
        message: "删除成功"
    }
        失败
    {
        result:"error",
        message:"删除失败"
    }
```

####发表博客(post)

```
<项目地址>/blog/addBlog
```

- 请求参数
```
{
        title   //String标题，大于五位小于五十位
        article //String 正文
        coverImg    //String 封面，可选
        categoryId[]    //int[] 类别id数组 最多五个，最少一个
}
```

- 返回参数
```
    成功
    {
        result:"success",
        message:"id"//博客id
    }
        失败
    {
        result:"error",
        message:"发表失败")
    }
```

####删除博客(post)
```
<项目地址>/blog/deleteBlog
```
- 请求参数
```
    {
        blogId//博客id
     }
```

- 返回参数
```
    成功
    {
        null
    }
    失败
    {
        result:"error",
        message:"删除失败"
    }
```

####修改博客(post)
```
<项目地址>/blog/modifyBlog
```
- 请求参数
```
    {
        id      //int 博客id
        title   //String标题，大于五位小于五十位
        article //String 正文
        coverImg    //String 封面，可选
        categoryId[]    //int[] 类别id数组 最多五个，最少一个
    }
```
- 返回参数
```
    成功
    {
        null
    }
        失败
    {
        result:"error",
        message:"修改失败")
    }
```
####上传图片(post)
```
<项目地址>/blog/imgUpload
```
- 请求参数
```
    {
        file //文件流
    }
```
- 返回参数
```
    成功
    {
        result:"success",
        message:"xxxx.xxx"//图片名     图片访问路径：<项目地址>+"/img/{message}"
    }
        失败
    {
        result:"error",
        message:"不支持此文件类型")
    }
```
####登录（post）
```
<项目地址>/blog/login
```
- 请求参数
```
    {
       username //String用户名
       password //String密码
    }
```
- 返回参数
```
    成功
    {
       "result":"sucess",
       "message":user //User用户
    }
    失败
    {
       "result":"error",
       "message":null
    }      
```
####注册(post)
```
<项目地址>/blog/registe
```
- 请求参数
```
   {
       username //String用户名
       password //String密码
       confirmPassword //String确认密码
       email //String邮箱
   }    
```
- 返回参数
```
   成功
   {
       "result":"sucess",
       "code":code, //String发送的验证码
       "message":"已经发送验证码到你的邮箱,请验证"
   }   
   失败
   {
       "result":"error",
       "message":"输入不能为空"或"两次输入密码不一致"或"输入邮箱格式不正确"
                  或"用户名已存在"或"此邮箱已注册"
   }               
```
####注册时邮箱验证(post)
```
- <项目地址> /blog/validate
```
- 请求参数
```
   {
       code  //String发送的验证码
       checkcode  //String用户填写的验证码
       username //String用户名
       password //String密码
       email //String邮箱
   }
```
- 返回参数
```
    成功
   {
      "result":"success",
      "message":null
   }
   失败
   {
       "result":"error"
       "message":"输入不能为空"或"验证码错误"
   }
```   
####根据博客id查看博客(GET)
```
<项目地址>/blog/{blogId}
```
- 请求参数
```
    {
        blogId 
    }
```
- 返回参数
```
    成功
    {
        "result": "success",
            "message": {
                "isUp":     //boolean 是否点赞
                "upCount": 1,   //点赞数
                "collectionCount": 1,   //收藏数
                "isCollect": false, //是否收藏
                "blog": {   
                    "id": 1,
                    "title": "adfadsfa",
                    "article": "adsfasdf",
                    "finishTime": "2018-07-23 10:24",
                    "user": {},     //user全部信息
                    "category": null,   //博客类
                    "coverImg": null    //博客封面
                },
                "commentCount": 2       //评论数
            }
    }
        失败
    {
        result:"error",
    }
```
####忘记密码(post)
```
- <项目地址> /blog/forgetPassword
```
- 请求参数
```
   {
       email //String用户填写的邮箱地址
   }
```
- 返回参数
```
   成功
   {
      "result":"success",
      "message":"已发送验证码到你的邮箱，请验证"
   }
   失败
   {
       "result":"error"
       "message":"该邮箱未注册"
   }
```
####忘记密码时邮箱验证(get)
```
- <项目地址> /blog/validateEmail
```
- 请求参数
```
   {
       email //String用户邮箱
       code  //String发送的验证码
       checkcode  //String用户填写的验证码
      (注：email=${rescope.email},code=${rescope.code})
   }
```
- 返回参数
```
    成功
   {
      "result":"success",
      "message":null
   }
   失败
   {
       "result":"error"
       "message":"输入不能为空"或"验证码错误"
   }
```   
####重置密码(post)
```
- <项目地址> /blog/resetPassword
```
- 请求参数
```
   {
       email //String用户邮箱
       password //String用户填写的密码
       confirmPassword //String确认密码
       (注：email=${rescope.email})
   }
```
- 返回参数
```
   成功
   {
      "result":"success",
      "message":null
   }
   失败
   {
       "result":"error"
       "message":"两次输入密码不正确"或"重置密码出错"
   }
```
####关注用户(get)
```
- <项目地址> /blog/userWatch
```
- 请求参数
```
   {
       user_id //int用户id
       beliked_id //int被关注用户id
   }
```
- 返回参数
```
   成功
   {
      "result":"success",
      "message":null
   }
   失败
   {
       "result":"error"
       "message":null
   }
```
####通过用户名搜索好友(post)
```
- <项目地址> /blog/findUser
```
- 请求参数
```
   {
      name //用户输入搜索信息
   }
```
- 返回参数
```
   成功
   {
      "result":"success",
      "message":users //User集合，包含id,username,faceImg
   }
   失败
   {
       "result":"error"
       "message":null
   }
```
####消息提醒
```                              
- <项目地址> /blog/getNews
```
- 请求参数
```
   {
      user_id //int用户id
   }
```
- 返回参数
```
   成功
   {
      "result":"success",
      "message":"id" 
                "type" //消息类型
                "username" 
                "news" //具体消息
   }
   失败
   {
       "result":"error"
       "message":null
   }
```
